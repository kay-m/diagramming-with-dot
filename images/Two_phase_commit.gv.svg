<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: m1 Pages: 1 -->
<svg width="508pt" height="636pt"
 viewBox="0.00 0.00 508.00 636.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 632)">
<title>m1</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-632 504,-632 504,4 -4,4"/>
<!-- Wait_for_Txn -->
<g id="node1" class="node"><title>Wait_for_Txn</title>
<polygon fill="none" stroke="black" points="308,-628 215,-628 215,-575 308,-575 308,-628"/>
<text text-anchor="middle" x="261.5" y="-612.8" font-family="Times New Roman,serif" font-size="14.00">Wait for Txn </text>
<text text-anchor="middle" x="261.5" y="-597.8" font-family="Times New Roman,serif" font-size="14.00"> to complete </text>
<text text-anchor="middle" x="261.5" y="-582.8" font-family="Times New Roman,serif" font-size="14.00"> at all sites</text>
</g>
<!-- Start_2pc -->
<g id="node2" class="node"><title>Start_2pc</title>
<polygon fill="none" stroke="black" points="318.5,-538 204.5,-538 204.5,-500 318.5,-500 318.5,-538"/>
<text text-anchor="middle" x="261.5" y="-522.8" font-family="Times New Roman,serif" font-size="14.00">Initialize the </text>
<text text-anchor="middle" x="261.5" y="-507.8" font-family="Times New Roman,serif" font-size="14.00"> commit protocol</text>
</g>
<!-- Wait_for_Txn&#45;&gt;Start_2pc -->
<g id="edge1" class="edge"><title>Wait_for_Txn&#45;&gt;Start_2pc</title>
<path fill="none" stroke="black" d="M261.5,-574.586C261.5,-566.313 261.5,-557.11 261.5,-548.654"/>
<polygon fill="black" stroke="black" points="265,-548.468 261.5,-538.468 258,-548.468 265,-548.468"/>
</g>
<!-- Phase1_start -->
<g id="node3" class="node"><title>Phase1_start</title>
<polygon fill="none" stroke="cornflowerblue" points="333,-463 190,-463 190,-395 333,-395 333,-463"/>
<text text-anchor="middle" x="261.5" y="-447.8" font-family="Times New Roman,serif" font-size="14.00" fill="cornflowerblue">Write &lt;Prepare T&gt;</text>
<text text-anchor="middle" x="261.5" y="-432.8" font-family="Times New Roman,serif" font-size="14.00" fill="cornflowerblue"> message to stable log </text>
<text text-anchor="middle" x="261.5" y="-417.8" font-family="Times New Roman,serif" font-size="14.00" fill="cornflowerblue"> and then </text>
<text text-anchor="middle" x="261.5" y="-402.8" font-family="Times New Roman,serif" font-size="14.00" fill="cornflowerblue"> send to all sites</text>
</g>
<!-- Start_2pc&#45;&gt;Phase1_start -->
<g id="edge2" class="edge"><title>Start_2pc&#45;&gt;Phase1_start</title>
<path fill="none" stroke="black" d="M261.5,-499.766C261.5,-492.002 261.5,-482.586 261.5,-473.217"/>
<polygon fill="black" stroke="black" points="265,-473.149 261.5,-463.15 258,-473.15 265,-473.149"/>
</g>
<!-- Phase1_Wait -->
<g id="node4" class="node"><title>Phase1_Wait</title>
<polygon fill="none" stroke="cornflowerblue" points="261.5,-358 103.5,-290 261.5,-222 419.5,-290 261.5,-358"/>
<text text-anchor="middle" x="261.5" y="-308.8" font-family="Times New Roman,serif" font-size="14.00" fill="cornflowerblue">Wait for responses from </text>
<text text-anchor="middle" x="261.5" y="-293.8" font-family="Times New Roman,serif" font-size="14.00" fill="cornflowerblue"> all participating sites </text>
<text text-anchor="middle" x="261.5" y="-278.8" font-family="Times New Roman,serif" font-size="14.00" fill="cornflowerblue">OR</text>
<text text-anchor="middle" x="261.5" y="-263.8" font-family="Times New Roman,serif" font-size="14.00" fill="cornflowerblue"> timeout</text>
</g>
<!-- Phase1_start&#45;&gt;Phase1_Wait -->
<g id="edge3" class="edge"><title>Phase1_start&#45;&gt;Phase1_Wait</title>
<path fill="none" stroke="black" d="M261.5,-394.836C261.5,-386.694 261.5,-377.635 261.5,-368.356"/>
<polygon fill="black" stroke="black" points="265,-368.233 261.5,-358.233 258,-368.233 265,-368.233"/>
</g>
<!-- Phase2_Commit -->
<g id="node5" class="node"><title>Phase2_Commit</title>
<polygon fill="none" stroke="forestgreen" points="221,-141 78,-141 78,-73 221,-73 221,-141"/>
<text text-anchor="middle" x="149.5" y="-125.8" font-family="Times New Roman,serif" font-size="14.00" fill="forestgreen">Write &lt;Commit T&gt;</text>
<text text-anchor="middle" x="149.5" y="-110.8" font-family="Times New Roman,serif" font-size="14.00" fill="forestgreen"> message to stable log </text>
<text text-anchor="middle" x="149.5" y="-95.8" font-family="Times New Roman,serif" font-size="14.00" fill="forestgreen"> and send then </text>
<text text-anchor="middle" x="149.5" y="-80.8" font-family="Times New Roman,serif" font-size="14.00" fill="forestgreen"> send to all sites</text>
</g>
<!-- Phase1_Wait&#45;&gt;Phase2_Commit -->
<g id="edge4" class="edge"><title>Phase1_Wait&#45;&gt;Phase2_Commit</title>
<path fill="none" stroke="black" d="M211.112,-243.585C199.877,-231.569 188.84,-218.014 180.5,-204 170.841,-187.77 163.819,-168.179 158.926,-150.939"/>
<polygon fill="black" stroke="black" points="162.259,-149.854 156.287,-141.103 155.498,-151.668 162.259,-149.854"/>
<text text-anchor="middle" x="243" y="-192.8" font-family="Times New Roman,serif" font-size="14.00">Received &lt;Ready T&gt; </text>
<text text-anchor="middle" x="243" y="-177.8" font-family="Times New Roman,serif" font-size="14.00"> as response </text>
<text text-anchor="middle" x="243" y="-162.8" font-family="Times New Roman,serif" font-size="14.00"> from all sites</text>
</g>
<!-- Phase2_Abort -->
<g id="node6" class="node"><title>Phase2_Abort</title>
<polygon fill="none" stroke="forestgreen" points="431,-141 288,-141 288,-73 431,-73 431,-141"/>
<text text-anchor="middle" x="359.5" y="-125.8" font-family="Times New Roman,serif" font-size="14.00" fill="forestgreen">Write &lt;Abort T&gt;</text>
<text text-anchor="middle" x="359.5" y="-110.8" font-family="Times New Roman,serif" font-size="14.00" fill="forestgreen"> message to stable log </text>
<text text-anchor="middle" x="359.5" y="-95.8" font-family="Times New Roman,serif" font-size="14.00" fill="forestgreen"> and then </text>
<text text-anchor="middle" x="359.5" y="-80.8" font-family="Times New Roman,serif" font-size="14.00" fill="forestgreen"> send to all sites</text>
</g>
<!-- Phase1_Wait&#45;&gt;Phase2_Abort -->
<g id="edge5" class="edge"><title>Phase1_Wait&#45;&gt;Phase2_Abort</title>
<path fill="none" stroke="black" d="M292.247,-235.194C298.041,-224.875 304.004,-214.129 309.5,-204 319.027,-186.44 329.265,-166.909 337.979,-150.072"/>
<polygon fill="black" stroke="black" points="341.172,-151.516 342.65,-141.025 334.952,-148.305 341.172,-151.516"/>
<text text-anchor="middle" x="382" y="-177.8" font-family="Times New Roman,serif" font-size="14.00">Timeout occured</text>
</g>
<!-- Phase2_Complete_Commit -->
<g id="node7" class="node"><title>Phase2_Complete_Commit</title>
<polygon fill="none" stroke="black" points="249,-36 -1.42109e-014,-36 -1.42109e-014,-0 249,-0 249,-36"/>
<text text-anchor="middle" x="124.5" y="-14.3" font-family="Times New Roman,serif" font-size="14.00">Inform User that transaction is committed</text>
</g>
<!-- Phase2_Commit&#45;&gt;Phase2_Complete_Commit -->
<g id="edge6" class="edge"><title>Phase2_Commit&#45;&gt;Phase2_Complete_Commit</title>
<path fill="none" stroke="black" d="M139.906,-72.6123C137.361,-63.7548 134.645,-54.3052 132.214,-45.8453"/>
<polygon fill="black" stroke="black" points="135.546,-44.7679 129.421,-36.1235 128.819,-46.7012 135.546,-44.7679"/>
</g>
<!-- Phase2_Complete_Abort -->
<g id="node8" class="node"><title>Phase2_Complete_Abort</title>
<polygon fill="none" stroke="black" points="500,-36 267,-36 267,-0 500,-0 500,-36"/>
<text text-anchor="middle" x="383.5" y="-14.3" font-family="Times New Roman,serif" font-size="14.00">Inform User that transaction is aborted</text>
</g>
<!-- Phase2_Abort&#45;&gt;Phase2_Complete_Abort -->
<g id="edge7" class="edge"><title>Phase2_Abort&#45;&gt;Phase2_Complete_Abort</title>
<path fill="none" stroke="black" d="M368.71,-72.6123C371.154,-63.7548 373.761,-54.3052 376.094,-45.8453"/>
<polygon fill="black" stroke="black" points="379.491,-46.6942 378.776,-36.1235 372.743,-44.8327 379.491,-46.6942"/>
</g>
</g>
</svg>
